
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../LAB_03b-Manage_Azure_Resources_by_Using_ARM_Templates/">
      
      
        <link rel="next" href="../LAB_05-Implement_Intersite_Connectivity/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Lab - Implement Virtual Networking - EduWe</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-implement-virtual-networking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EduWe" class="md-header__button md-logo" aria-label="EduWe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EduWe
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab - Implement Virtual Networking
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EduWe" class="md-nav__button md-logo" aria-label="EduWe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    EduWe
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Us
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_01-Manage_Entra_ID_Identities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Microsoft Entra ID Identities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_02a_Manage_Subscriptions_and_RBAC_Entra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Subscriptions and RBAC
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_02b-Manage_Governance_via_Azure_Policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Governance via Azure Policy
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_03b-Manage_Azure_Resources_by_Using_ARM_Templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Azure Resources by using Azure Resource Manager Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lab - Implement Virtual Networking
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Virtual Networking
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-time-50-minutes" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Time: 50 Minutes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-lab-simulations" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Lab Simulations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skills" class="md-nav__link">
    <span class="md-ellipsis">
      Job Skills
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-create-a-virtual-network-with-subnets-using-the-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Create a Virtual Network with Subnets using the Portal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-create-a-virtual-network-and-subnets-using-a-template" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Create a Virtual Network and Subnets using a Template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 2: Create a Virtual Network and Subnets using a Template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-changes-for-the-manufacturingvnet-virtual-network" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes for the ManufacturingVnet Virtual Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-changes-for-the-manufacturingvnet-subnets" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes for the ManufacturingVnet Subnets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-changes-to-the-parameters-file" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes to the Parameters File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-custom-template" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Custom Template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-create-and-configure-communication-between-an-application-security-group-and-a-network-security-group" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Create and Configure Communication between an Application Security Group and a Network Security Group
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 3: Create and Configure Communication between an Application Security Group and a Network Security Group">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-application-security-group-asg" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Application Security Group (ASG)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-network-security-group-and-associate-it-with-coreservicesvnet" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Network Security Group and Associate it with CoreServicesVnet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-an-inbound-security-rule-to-allow-asg-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Configure an Inbound Security Rule to Allow ASG Traffic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-an-outbound-nsg-rule-that-denies-internet-access" class="md-nav__link">
    <span class="md-ellipsis">
      Configure an Outbound NSG Rule that denies Internet Access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-4-configure-public-and-private-azure-dns-zones" class="md-nav__link">
    <span class="md-ellipsis">
      Task 4: Configure Public and Private Azure DNS Zones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 4: Configure Public and Private Azure DNS Zones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-a-public-dns-zone" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Public DNS Zone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-a-private-dns-zone" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Private DNS Zone
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanup-your-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup your Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_05-Implement_Intersite_Connectivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Intersite Connectivity
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_06-Implement_Network_Traffic_Management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Network Traffic Management
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_07-Manage_Azure_Storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Azure Storage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_08-Manage_Virtual_Machines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Manage Virtual Machines
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09a-Implement_Web_Apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Web Apps
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09b-Implement_Azure_Container_Instances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Azure Container Instances (ACI)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09c-Implement-Azure-Container-Apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Azure Container Apps
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_10-Implement_Data_Protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Data Protection
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_11-Implement_Monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab - Implement Monitoring
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact Us
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Media
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Media
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../media/readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Readme
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-time-50-minutes" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Time: 50 Minutes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-lab-simulations" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Lab Simulations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skills" class="md-nav__link">
    <span class="md-ellipsis">
      Job Skills
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-create-a-virtual-network-with-subnets-using-the-portal" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Create a Virtual Network with Subnets using the Portal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-create-a-virtual-network-and-subnets-using-a-template" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Create a Virtual Network and Subnets using a Template
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 2: Create a Virtual Network and Subnets using a Template">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-changes-for-the-manufacturingvnet-virtual-network" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes for the ManufacturingVnet Virtual Network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-changes-for-the-manufacturingvnet-subnets" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes for the ManufacturingVnet Subnets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-changes-to-the-parameters-file" class="md-nav__link">
    <span class="md-ellipsis">
      Make changes to the Parameters File
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-the-custom-template" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy the Custom Template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-create-and-configure-communication-between-an-application-security-group-and-a-network-security-group" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Create and Configure Communication between an Application Security Group and a Network Security Group
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 3: Create and Configure Communication between an Application Security Group and a Network Security Group">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-the-application-security-group-asg" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Application Security Group (ASG)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-the-network-security-group-and-associate-it-with-coreservicesvnet" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Network Security Group and Associate it with CoreServicesVnet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-an-inbound-security-rule-to-allow-asg-traffic" class="md-nav__link">
    <span class="md-ellipsis">
      Configure an Inbound Security Rule to Allow ASG Traffic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-an-outbound-nsg-rule-that-denies-internet-access" class="md-nav__link">
    <span class="md-ellipsis">
      Configure an Outbound NSG Rule that denies Internet Access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-4-configure-public-and-private-azure-dns-zones" class="md-nav__link">
    <span class="md-ellipsis">
      Task 4: Configure Public and Private Azure DNS Zones
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 4: Configure Public and Private Azure DNS Zones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-a-public-dns-zone" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Public DNS Zone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-a-private-dns-zone" class="md-nav__link">
    <span class="md-ellipsis">
      Configure a Private DNS Zone
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanup-your-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup your Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="lab-implement-virtual-networking">Lab - Implement Virtual Networking</h1>
<hr />
<h2 id="lab-introduction">Lab Introduction</h2>
<p>This lab is the first of three labs that focuses on virtual networking. In this lab, you learn the basics of virtual networking and subnetting. You learn how to protect your network with network security groups and application security groups. You also learn about DNS zones and records. </p>
<p>This lab requires an Azure subscription. Your subscription type may affect the availability of features in this lab. You may change the region, but the steps are written using <strong>East US</strong>.</p>
<h2 id="estimated-time-50-minutes">Estimated Time: 50 Minutes</h2>
<h2 id="lab-scenario">Lab Scenario</h2>
<p>Your global organization (i.e. Adamantus Technologies) plans to implement virtual networks. The immediate goal is to accommodate all the existing resources. However, the organization is in a growth phase and wants to ensure there is additional capacity for the growth.</p>
<p>The <strong>CoreServicesVnet</strong> virtual network has the largest number of resources. A large amount of growth is anticipated, so a large address space is necessary for this virtual network.</p>
<p>The <strong>ManufacturingVnet</strong> virtual network contains systems for the operations of the manufacturing facilities. The organization is anticipating a large number of internal connected devices for their systems to retrieve data from. </p>
<h2 id="interactive-lab-simulations">Interactive Lab Simulations</h2>
<p>There are several interactive lab simulations that you might find useful for this topic. The simulation lets you to click through a similar scenario at your own pace. There are differences between the interactive simulation and this lab, but many of the core concepts are the same. An Azure subscription is not required. </p>
<ul>
<li>
<p><a href="https://mslearn.cloudguides.com/en-us/guides/AZ-900%20Exam%20Guide%20-%20Azure%20Fundamentals%20Exercise%2013">Secure network traffic</a>. Create a virtual machine, a virtual network, and a network security group. Add network security group rules to allow and disallow traffic.</p>
</li>
<li>
<p><a href="https://mslearn.cloudguides.com/en-us/guides/AZ-900%20Exam%20Guide%20-%20Azure%20Fundamentals%20Exercise%204">Create a simple virtual network</a>. Create a virtual network with two virtual machines. Demonstrate the virtual machines can communicate. </p>
</li>
<li>
<p><a href="https://mslabs.cloudguides.com/guides/AZ-700%20Lab%20Simulation%20-%20Design%20and%20implement%20a%20virtual%20network%20in%20Azure">Design and implement a virtual network in Azure</a>. Create a resource group and create virtual networks with subnets.  </p>
</li>
<li>
<p><a href="https://mslabs.cloudguides.com/en-us/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%208">Implement virtual networking</a>. Create and configure a virtual network, deploy virtual machines, configure network security groups, and configure Azure DNS.</p>
</li>
</ul>
<h2 id="architecture-diagram">Architecture Diagram</h2>
<p><img alt="Network layout" src="../media/az104-lab04-architecture.png" /></p>
<p>These virtual networks and subnets are structured in a way that accommodates existing resources yet allows for the projected growth. Let's create these virtual networks and subnets to lay the foundation for our networking infrastructure.</p>
<blockquote>
<p><strong>Did you know?</strong>: It is a good practice to avoid overlapping IP address ranges to reduce issues and simplify troubleshooting. Overlapping is a concern across the entire network, whether in the cloud or on-premises. Many organizations design an enterprise-wide IP addressing scheme to avoid overlapping and plan for future growth.</p>
</blockquote>
<h2 id="job-skills">Job Skills</h2>
<ul>
<li><strong>Task 1: Create a virtual network with subnets using the portal.</strong></li>
<li><strong>Task 2: Create a virtual network and subnets using a template.</strong></li>
<li><strong>Task 3: Create and configure communication between an Application Security Group and a Network Security Group.</strong></li>
<li><strong>Task 4: Configure public and private Azure DNS zones.</strong></li>
</ul>
<h2 id="task-1-create-a-virtual-network-with-subnets-using-the-portal">Task 1: Create a Virtual Network with Subnets using the Portal</h2>
<p>The organization plans a large amount of growth for core services. In this task, you create the virtual network and the associated subnets to accommodate the existing resources and planned growth. In this task, you will use the Azure portal. </p>
<ol>
<li>
<p>Sign in to the <strong>Azure portal</strong> - <code>https://portal.azure.com</code>.</p>
</li>
<li>
<p>Search for and select <code>Virtual Networks</code>.</p>
</li>
<li>
<p>Select <strong>Create</strong> on the Virtual networks page.</p>
</li>
<li>
<p>Complete the <strong>Basics</strong> tab for the CoreServicesVnet.  </p>
<table>
<thead>
<tr>
<th><strong>Option</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Resource Group</td>
<td><code>az104-rg4</code> (if necessary, create new)</td>
</tr>
<tr>
<td>Name</td>
<td><code>CoreServicesVnet</code></td>
</tr>
<tr>
<td>Region</td>
<td>(US) <strong>East US</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Move to the <strong>IP Addresses</strong> tab.</p>
<table>
<thead>
<tr>
<th><strong>Option</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>IPv4 address space</td>
<td>Replace the prepopulated IPv4 address space with <code>10.20.0.0/16</code> (separate the entries)</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>+ Add a subnet</strong>. Complete the name and address information for each subnet. Be sure to select <strong>Add</strong> for each new subnet. Be sure to delete the default subnet - either before or after creating the other subnets.</p>
<table>
<thead>
<tr>
<th><strong>Subnet</strong></th>
<th><strong>Option</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>SharedServicesSubnet</td>
<td>Subnet name</td>
<td><code>SharedServicesSubnet</code></td>
</tr>
<tr>
<td></td>
<td>Starting address</td>
<td><code>10.20.10.0</code></td>
</tr>
<tr>
<td></td>
<td>Size</td>
<td><code>/24</code></td>
</tr>
<tr>
<td>DatabaseSubnet</td>
<td>Subnet name</td>
<td><code>DatabaseSubnet</code></td>
</tr>
<tr>
<td></td>
<td>Starting address</td>
<td><code>10.20.20.0</code></td>
</tr>
<tr>
<td></td>
<td>Size</td>
<td><code>/24</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Every virtual network must have at least one subnet. Reminder that five IP addresses will always be reserved, so consider that in your planning. </p>
</blockquote>
</li>
<li>
<p>To finish creating the CoreServicesVnet and its associated subnets, select <strong>Review + create</strong>.</p>
</li>
<li>
<p>Verify your configuration passed validation, and then select <strong>Create</strong>.</p>
</li>
<li>
<p>Wait for the virtual network to deploy and then select <strong>Go to resource</strong>.</p>
</li>
<li>
<p>Take a minute to verify the <strong>Address space</strong> and the <strong>Subnets</strong>. Notice your other choices in the <strong>Settings</strong> blade. </p>
</li>
<li>
<p>In the <strong>Automation</strong> section, select <strong>Export template</strong>, and then wait for the template to be generated.</p>
</li>
<li>
<p><strong>Download</strong> the template.</p>
</li>
<li>
<p>Navigate on the local machine to the <strong>Downloads</strong> folder and <strong>Extract all</strong> the files in the downloaded zip file. </p>
</li>
<li>
<p>Before proceeding, ensure you have the <strong>template.json</strong> file. You will use this template to create the ManufacturingVnet in the next task. </p>
</li>
</ol>
<h2 id="task-2-create-a-virtual-network-and-subnets-using-a-template">Task 2: Create a Virtual Network and Subnets using a Template</h2>
<p>In this task, you create the ManufacturingVnet virtual network and associated subnets. The organization anticipates growth for the manufacturing offices so the subnets are sized for the expected growth. For this task, you use a template to create the resources. </p>
<ol>
<li>
<p>Locate the <strong>template.json</strong> file exported in the previous task. It should be in your <strong>Downloads</strong> folder.</p>
</li>
<li>
<p>Edit the file using the editor of your choice. Many editors have a <em>change all occurrences</em> feature. If you are using Visual Studio Code be sure you are working in a <strong>trusted window</strong> and not in the <strong>restricted mode</strong>. Consult the architecture diagram to verify the details. </p>
</li>
</ol>
<h3 id="make-changes-for-the-manufacturingvnet-virtual-network">Make changes for the ManufacturingVnet Virtual Network</h3>
<ol>
<li>
<p>Replace all occurrences of <strong>CoreServicesVnet</strong> with <code>ManufacturingVnet</code>. </p>
</li>
<li>
<p>Replace all occurrences of <strong>10.20.0.0</strong> with <code>10.30.0.0</code>. </p>
</li>
</ol>
<h3 id="make-changes-for-the-manufacturingvnet-subnets">Make changes for the ManufacturingVnet Subnets</h3>
<ol>
<li>
<p>Change all occurrences of <strong>SharedServicesSubnet</strong> to <code>SensorSubnet1</code>.</p>
</li>
<li>
<p>Change all occurrences of <strong>10.20.10.0/24</strong> to <code>10.30.20.0/24</code>.</p>
</li>
<li>
<p>Change all occurrences of <strong>DatabaseSubnet</strong> to <code>SensorSubnet2</code>.</p>
</li>
<li>
<p>Change all occurrences of <strong>10.20.20.0/24</strong> to <code>10.30.21.0/24</code>.</p>
</li>
<li>
<p>Read back through the file and ensure everything looks correct. Use the architecture diagram for resource names and IP addresses. </p>
</li>
<li>
<p>Be sure to <strong>Save</strong> your changes.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> There is a completed template files in the lab files directory. </p>
</blockquote>
<h3 id="make-changes-to-the-parameters-file">Make changes to the Parameters File</h3>
<ol>
<li>
<p>Locate the <strong>parameters.json</strong> file exported in the previous task. It should be in your <strong>Downloads</strong> folder.</p>
</li>
<li>
<p>Edit the file using the editor of your choice.</p>
</li>
<li>
<p>Replace the one occurrence of <strong>CoreServicesVnet</strong> with <code>ManufacturingVnet</code>.</p>
</li>
<li>
<p><strong>Save</strong> your changes.</p>
</li>
</ol>
<h3 id="deploy-the-custom-template">Deploy the Custom Template</h3>
<ol>
<li>
<p>In the portal, search for and select <code>Deploy a custom template</code>.</p>
</li>
<li>
<p>Select <strong>Build your own template in the editor</strong> and then <strong>Load file</strong>.</p>
</li>
<li>
<p>Select the <strong>templates.json</strong> file with your Manufacturing changes, then select <strong>Save</strong>.</p>
</li>
<li>
<p>Select <strong>Edit template</strong>, and then <strong>Load file</strong>.</p>
</li>
<li>
<p>Select the <strong>parameters.json</strong> file with your Manufacturing changes, then select <strong>Save</strong>.</p>
</li>
<li>
<p>Ensure your resource group, <strong>az104-rg4</strong> is selected. </p>
</li>
<li>
<p>Select <strong>Review + create</strong> and then <strong>Create</strong>.</p>
</li>
<li>
<p>Wait for the template to deploy, then confirm (in the portal) the Manufacturing virtual network and subnets were created.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> If you have to deploy more than one time you may find some resources were successfully completed and the deployment is failing. You can manually remove those resources and try again. </p>
</blockquote>
<h2 id="task-3-create-and-configure-communication-between-an-application-security-group-and-a-network-security-group">Task 3: Create and Configure Communication between an Application Security Group and a Network Security Group</h2>
<p>In this task, we create an Application Security Group and a Network Security Group. The NSG will have an inbound security rule that allows traffic from the ASG. The NSG will also have an outbound rule that denies access to the internet. </p>
<h3 id="create-the-application-security-group-asg">Create the Application Security Group (ASG)</h3>
<ol>
<li>
<p>In the Azure portal, search for and select <code>Application security groups</code>.</p>
</li>
<li>
<p>Click <strong>Create</strong> and provide the basic information.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td><em>your subscription</em></td>
</tr>
<tr>
<td>Resource group</td>
<td><strong>az104-rg4</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>asg-web</code></td>
</tr>
<tr>
<td>Region</td>
<td><strong>East US</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Review + create</strong> and then after the validation click <strong>Create</strong>.</p>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong> At this point, you would associate the ASG with virtual machine(s). These machines will be affected by the inbound NSG rule you create in the next task.  </p>
</blockquote>
<h3 id="create-the-network-security-group-and-associate-it-with-coreservicesvnet">Create the Network Security Group and Associate it with CoreServicesVnet</h3>
<ol>
<li>
<p>In the Azure portal, search for and select <code>Network security groups</code>.</p>
</li>
<li>
<p>Select <strong>+ Create</strong> and provide information on the <strong>Basics</strong> tab. </p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td><em>your subscription</em></td>
</tr>
<tr>
<td>Resource group</td>
<td><strong>az104-rg4</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>myNSGSecure</code></td>
</tr>
<tr>
<td>Region</td>
<td><strong>East US</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Review + create</strong> and then after the validation click <strong>Create</strong>.</p>
</li>
<li>
<p>After the NSG is deployed, click <strong>Go to resource</strong>.</p>
</li>
<li>
<p>Under <strong>Settings</strong> click <strong>Subnets</strong> and then <strong>Associate</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Virtual network</td>
<td><strong>CoreServicesVnet (az104-rg4)</strong></td>
</tr>
<tr>
<td>Subnet</td>
<td><strong>SharedServicesSubnet</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>OK</strong> to save the association.</p>
</li>
</ol>
<h3 id="configure-an-inbound-security-rule-to-allow-asg-traffic">Configure an Inbound Security Rule to Allow ASG Traffic</h3>
<ol>
<li>
<p>Continue working with your NSG. In the <strong>Settings</strong> area, select <strong>Inbound security rules</strong>.</p>
</li>
<li>
<p>Review the default inbound rules. Notice that only other virtual networks and load balancers are allowed access.</p>
</li>
<li>
<p>Select <strong>+ Add</strong>.</p>
</li>
<li>
<p>On the <strong>Add inbound security rule</strong> blade, use the following information to add an inbound port rule. This rule allows ASG traffic. When you are finished, select <strong>Add</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Source</td>
<td><strong>Application security group</strong></td>
</tr>
<tr>
<td>Source application security groups</td>
<td><strong>asg-web</strong></td>
</tr>
<tr>
<td>Source port ranges</td>
<td>*</td>
</tr>
<tr>
<td>Destination</td>
<td><strong>Any</strong></td>
</tr>
<tr>
<td>Service</td>
<td><strong>Custom</strong> (notice your other choices)</td>
</tr>
<tr>
<td>Destination port ranges</td>
<td><strong>80,443</strong></td>
</tr>
<tr>
<td>Protocol</td>
<td><strong>TCP</strong></td>
</tr>
<tr>
<td>Action</td>
<td><strong>Allow</strong></td>
</tr>
<tr>
<td>Priority</td>
<td><strong>100</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>AllowASG</code></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h3 id="configure-an-outbound-nsg-rule-that-denies-internet-access">Configure an Outbound NSG Rule that denies Internet Access</h3>
<ol>
<li>
<p>After creating your inbound NSG rule, select <strong>Outbound security rules</strong>. </p>
</li>
<li>
<p>Notice the <strong>AllowInternetOutboundRule</strong> rule. Also notice the rule cannot be deleted and the priority is 65001.</p>
</li>
<li>
<p>Select <strong>+ Add</strong> and then configure an outbound rule that denies access to the internet. When you are finished, select <strong>Add</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Source</td>
<td><strong>Any</strong></td>
</tr>
<tr>
<td>Source port ranges</td>
<td>*</td>
</tr>
<tr>
<td>Destination</td>
<td><strong>Service tag</strong></td>
</tr>
<tr>
<td>Destination service tag</td>
<td><strong>Internet</strong></td>
</tr>
<tr>
<td>Service</td>
<td><strong>Custom</strong></td>
</tr>
<tr>
<td>Destination port ranges</td>
<td><strong>8080</strong></td>
</tr>
<tr>
<td>Protocol</td>
<td><strong>Any</strong></td>
</tr>
<tr>
<td>Action</td>
<td><strong>Deny</strong></td>
</tr>
<tr>
<td>Priority</td>
<td><strong>4096</strong></td>
</tr>
<tr>
<td>Name</td>
<td><strong>DenyAnyCustom8080Outbound</strong></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="task-4-configure-public-and-private-azure-dns-zones">Task 4: Configure Public and Private Azure DNS Zones</h2>
<p>In this task, you will create and configure public and private DNS zones. </p>
<h3 id="configure-a-public-dns-zone">Configure a Public DNS Zone</h3>
<p>You can configure Azure DNS to resolve host names in your public domain. For example, if you purchased the contoso.xyz domain name from a domain name registrar, you can configure Azure DNS to host the <code>contoso.com</code> domain and resolve www.contoso.xyz to the IP address of your web server or web app.</p>
<ol>
<li>
<p>In the portal, search for and select <code>DNS zones</code>.</p>
</li>
<li>
<p>Select <strong>+ Create</strong>.</p>
</li>
<li>
<p>Configure the <strong>Basics</strong> tab.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Subscription</td>
<td style="text-align: left;"><strong>Select your subscription</strong></td>
</tr>
<tr>
<td style="text-align: left;">Resource group</td>
<td style="text-align: left;"><strong>az-104-rg4</strong></td>
</tr>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;"><code>contoso.com</code> (if reserved adjust the name)</td>
</tr>
<tr>
<td style="text-align: left;">Region</td>
<td style="text-align: left;"><strong>East US</strong> (review the informational icon)</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>Review create</strong> and then <strong>Create</strong>.</p>
</li>
<li>
<p>Wait for the DNS zone to deploy and then select <strong>Go to resource</strong>.</p>
</li>
<li>
<p>On the <strong>Overview</strong> blade notice the names of the four Azure DNS name servers assigned to the zone. <strong>Copy</strong> one of the name server addresses. You will need it in a future step. </p>
</li>
<li>
<p>Select <strong>+ Record set</strong>. <strong>Add</strong> a virtual network link record for each virtual network that needs private name-resolution support.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;"><strong>www</strong></td>
</tr>
<tr>
<td style="text-align: left;">Type</td>
<td style="text-align: left;"><strong>A</strong></td>
</tr>
<tr>
<td style="text-align: left;">TTL</td>
<td style="text-align: left;"><strong>1</strong></td>
</tr>
<tr>
<td style="text-align: left;">IP address</td>
<td style="text-align: left;"><strong>10.1.1.4</strong></td>
</tr>
</tbody>
</table>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong>  In a real-world scenario, you'd enter the public IP address of your web server.</p>
</blockquote>
<ol>
<li>
<p>Select <strong>OK</strong> and verify your domain has an A record set named <strong>www</strong>.</p>
</li>
<li>
<p>Open a command prompt, and run the following command. If you have changed the domain name, make an adjustment. </p>
</li>
</ol>
<p><code>sh
   nslookup www.contoso.com &lt;name server name&gt;</code>
1. Verify the host name www.contoso.com resolves to the IP address you provided. This confirms name resolution is working correctly.</p>
<h3 id="configure-a-private-dns-zone">Configure a Private DNS Zone</h3>
<p>A private DNS zone provides name resolution services within virtual networks. A private DNS zone is only accessible from the virtual networks that it is linked to and can't be accessed from the internet. </p>
<ol>
<li>
<p>In the portal, search for and select <code>Private dns zones</code>.</p>
</li>
<li>
<p>Select <strong>+ Create</strong>.</p>
</li>
<li>
<p>On the <strong>Basics</strong> tab of Create private DNS zone, enter the information as listed in the table below:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Subscription</td>
<td style="text-align: left;"><strong>Select your subscription</strong></td>
</tr>
<tr>
<td style="text-align: left;">Resource group</td>
<td style="text-align: left;"><strong>az-104-rg4</strong></td>
</tr>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;"><code>private.contoso.com</code> (adjust if you had to rename)</td>
</tr>
<tr>
<td style="text-align: left;">Region</td>
<td style="text-align: left;"><strong>East US</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>Review create</strong> and then <strong>Create</strong>.</p>
</li>
<li>
<p>Wait for the DNS zone to deploy and then select <strong>Go to resource</strong>.</p>
</li>
<li>
<p>Notice on the <strong>Overview</strong> blade there are no name server records. </p>
</li>
<li>
<p>Select <strong>DNS Management</strong> and then select <strong>Virtual network links</strong>. Configure the link. </p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Link name</td>
<td style="text-align: left;"><code>manufacturing-link</code></td>
</tr>
<tr>
<td style="text-align: left;">Virtual network</td>
<td style="text-align: left;"><code>ManufacturingVnet</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>Create</strong> and wait for the link to create. </p>
</li>
<li>
<p>From the <strong>DNS Management</strong> blade select <strong>+ Recordsets</strong>. You would now add a record for each virtual machine that needs private name-resolution support.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;"><strong>sensorvm</strong></td>
</tr>
<tr>
<td style="text-align: left;">Type</td>
<td style="text-align: left;"><strong>A</strong></td>
</tr>
<tr>
<td style="text-align: left;">TTL</td>
<td style="text-align: left;"><strong>1</strong></td>
</tr>
<tr>
<td style="text-align: left;">IP address</td>
<td style="text-align: left;"><strong>10.1.1.4</strong></td>
</tr>
</tbody>
</table>
</li>
</ol>
<blockquote>
<p><strong>Note:</strong>  In a real-world scenario, you'd enter the IP address for a specific manufacturing virtual machine.</p>
</blockquote>
<h2 id="cleanup-your-resources">Cleanup your Resources</h2>
<p>If you are working with <strong>your own subscription</strong> take a minute to delete the lab resources. This will ensure resources are freed up and cost is minimized. The easiest way to delete the lab resources is to delete the lab resource group. </p>
<ul>
<li>In the Azure portal, select the resource group, select <strong>Delete the resource group</strong>, <strong>Enter resource group name</strong>, and then click <strong>Delete</strong>.</li>
<li>Using Azure PowerShell, <code>Remove-AzResourceGroup -Name resourceGroupName</code>.</li>
<li>Using the CLI, <code>az group delete --name resourceGroupName</code>.</li>
</ul>
<h2 id="key-takeaways">Key Takeaways</h2>
<p>Congratulations on completing the lab. Here are the main takeaways for this lab. </p>
<ul>
<li>A virtual network is a representation of your own network in the cloud. </li>
<li>When designing virtual networks it is a good practice to avoid overlapping IP address ranges. This will reduce issues and simplify troubleshooting.</li>
<li>A subnet is a range of IP addresses in the virtual network. You can divide a virtual network into multiple subnets for organization and security.</li>
<li>A network security group contains security rules that allow or deny network traffic. There are default incoming and outgoing rules which you can customize to your needs.</li>
<li>Application security groups are used to protect groups of servers with a common function, such as web servers or database servers.</li>
<li>Azure DNS is a hosting service for DNS domains that provides name resolution. You can configure Azure DNS to resolve host names in your public domain.  You can also use private DNS zones to assign DNS names to virtual machines (VMs) in your Azure virtual networks.</li>
</ul>
<hr />
<div style="text-align: center; padding-top: 30px;">
  <img src="/images/logo.png" alt="EduWe Logo" style="max-width: 150px; height: auto;"/>

  <center><strong>Ceekh Edunix Pvt Ltd</strong></center><br>
    Address: H-34, Ground Floor, Sector 63, Noida, Uttar Pradesh<br>
    Email: <a href="mailto:info@ceekh.com" style="color: #007bff;">info@ceekh.com</a>
  </p>
  <p style="font-size: 14px; color: #555;"><center>© 2025 EduWe. All rights reserved.| Developed by Deepak Kumar Tyagi </center></p>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.twitter.com" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.facebook.com" target="_blank" rel="noopener" title="Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/@eduwe8400" target="_blank" rel="noopener" title="YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:info@ceekh.com" target="_blank" rel="noopener" title="Email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>