
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../LAB_05-Implement_Intersite_Connectivity/">
      
      
        <link rel="next" href="../LAB_07-Manage_Azure_Storage/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Lab-7 Implement Network Traffic Management - EduWe</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-implement-network-traffic-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="EduWe" class="md-header__button md-logo" aria-label="EduWe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EduWe
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab-7 Implement Network Traffic Management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../azure/" class="md-tabs__link">
          
  
  
  Azure Labs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../AWS/aws-overview/" class="md-tabs__link">
          
  
  
  AWS Labs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../GCP/gcp-overview/" class="md-tabs__link">
          
  
  
  GCP Labs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../azure-trouble/" class="md-tabs__link">
          
  
  
  Troubleshooting

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Blogs/blog1/" class="md-tabs__link">
          
  
  
  Blogs

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../contact/" class="md-tabs__link">
        
  
  
    
  
  Contact Us

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="EduWe" class="md-nav__button md-logo" aria-label="EduWe" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    EduWe
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Azure Labs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Azure Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_01-Manage_Entra_ID_Identities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-1 Manage Microsoft Entra ID Identities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_02a_Manage_Subscriptions_and_RBAC_Entra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-2 Manage Subscriptions and RBAC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_02b-Manage_Governance_via_Azure_Policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-3 Manage Governance via Azure Policy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_03b-Manage_Azure_Resources_by_Using_ARM_Templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-4 Manage Azure Resources by using Azure Resource Manager Templates
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_04-Implement_Virtual_Networking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-5 Implement Virtual Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_05-Implement_Intersite_Connectivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-6 Implement Intersite Connectivity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Lab-7 Implement Network Traffic Management
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Lab-7 Implement Network Traffic Management
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-timing-50-minutes" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Timing: 50 Minutes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-lab-simulations" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Lab Simulations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skills" class="md-nav__link">
    <span class="md-ellipsis">
      Job Skills
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-use-a-template-to-provision-an-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Use a Template to Provision an Infrastructure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-configure-an-azure-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Configure an Azure Load Balancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram - Load Balancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-configure-an-azure-application-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Configure an Azure Application Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram-application-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram - Application Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanup-your-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup your Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_07-Manage_Azure_Storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-8 Manage Azure Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_08-Manage_Virtual_Machines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-9 Manage Virtual Machines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09a-Implement_Web_Apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-10 Implement Web Apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09b-Implement_Azure_Container_Instances/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-11 Implement Azure Container Instances (ACI)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_09c-Implement-Azure-Container-Apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-12 Implement Azure Container Apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_10-Implement_Data_Protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-13 Implement Data Protection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LAB_11-Implement_Monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-14 Implement Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AWS Labs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            AWS Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/aws-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/aws-lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/aws-lab2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/aws-lab3.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-3
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GCP Labs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            GCP Labs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GCP/gcp-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GCP/gcp-lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GCP/gcp-lab2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab-2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../azure-trouble/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure Troubleshooting Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AWS/aws-trouble/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Troubleshooting Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GCP/gcp-trouble/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GCP Troubleshooting Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Blogs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Blogs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role of Cloud Computing in Software Developer Life
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud Computing's Impact on Businesses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment of WebApp Using Azure App Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Load Distribution Using Azure Load Balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Best Practices for Designing Secure Azure Solutions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Choosing the Right Cloud Platform for Your Needs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to Azure Security and Compliance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Computer Networks-The Digital Nervous System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding the OSI Model-The Blueprint of Modern Networking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Blogs/blog10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cloud Computing-The Backbone of Modern IT Education
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact Us
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimated-timing-50-minutes" class="md-nav__link">
    <span class="md-ellipsis">
      Estimated Timing: 50 Minutes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-lab-simulations" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Lab Simulations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-skills" class="md-nav__link">
    <span class="md-ellipsis">
      Job Skills
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-use-a-template-to-provision-an-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Use a Template to Provision an Infrastructure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-2-configure-an-azure-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Task 2: Configure an Azure Load Balancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram - Load Balancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-3-configure-an-azure-application-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Task 3: Configure an Azure Application Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-diagram-application-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram - Application Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanup-your-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup your Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="lab-implement-network-traffic-management">Lab - Implement Network Traffic Management<a class="headerlink" href="#lab-implement-network-traffic-management" title="Permanent link">&para;</a></h1>
<hr />
<h2 id="lab-introduction">Lab Introduction<a class="headerlink" href="#lab-introduction" title="Permanent link">&para;</a></h2>
<p>In this lab, you learn how to configure and test a public Load Balancer and an Application Gateway.</p>
<p>This lab requires an Azure subscription. Your subscription type may affect the availability of features in this lab. You may change the region, but the steps are written using <strong>East US</strong>.</p>
<h2 id="estimated-timing-50-minutes">Estimated Timing: 50 Minutes<a class="headerlink" href="#estimated-timing-50-minutes" title="Permanent link">&para;</a></h2>
<h2 id="lab-scenario">Lab Scenario<a class="headerlink" href="#lab-scenario" title="Permanent link">&para;</a></h2>
<p>Adamantus Technologies has a public website. You need to load balance incoming public requests across different virtual machines. You also need to provide images and videos from different virtual machines. You plan on implementing an Azure Load Balancer and an Azure Application Gateway. All resources are in the same region.</p>
<h2 id="interactive-lab-simulations">Interactive Lab Simulations<a class="headerlink" href="#interactive-lab-simulations" title="Permanent link">&para;</a></h2>
<p>There are interactive lab simulations that you might find useful for this topic. The simulation lets you to click through a similar scenario at your own pace. There are differences between the interactive simulation and this lab, but many of the core concepts are the same. An Azure subscription is not required.</p>
<ul>
<li><a href="https://mslabs.cloudguides.com/guides/AZ-700%20Lab%20Simulation%20-%20Create%20and%20configure%20an%20Azure%20load%20balancer">Create and configure and Azure load balancer</a>. Create a virtual network, backend servers, load balancer, and then test the load balancer.</li>
<li><a href="https://mslabs.cloudguides.com/guides/AZ-700%20Lab%20Simulation%20-%20Deploy%20Azure%20Application%20Gateway">Deploy Azure Application Gateway</a>. Create an application gateway, create virtual machines, create the backend pool, and test the gateway.</li>
<li><a href="https://mslabs.cloudguides.com/guides/AZ-104%20Exam%20Guide%20-%20Microsoft%20Azure%20Administrator%20Exercise%2010">Implement traffic management</a>. Implement complete hub and spoke network including virtual machines, virtual networks, peering, load balancer, and application gateway.</li>
</ul>
<h2 id="job-skills">Job Skills<a class="headerlink" href="#job-skills" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Task 1: Use a template to provision an infrastructure.</strong></li>
<li><strong>Task 2: Configure an Azure Load Balancer.</strong></li>
<li><strong>Task 3: Configure an Azure Application Gateway.</strong></li>
</ul>
<h2 id="task-1-use-a-template-to-provision-an-infrastructure">Task 1: Use a Template to Provision an Infrastructure<a class="headerlink" href="#task-1-use-a-template-to-provision-an-infrastructure" title="Permanent link">&para;</a></h2>
<p>In this task, you will use a template to deploy one virtual network, one network security group, and two virtual machines.</p>
<ol>
<li>
<p><a href="../../Allfiles/Labs/06/az104-06-vms-template.json" download>⬇️ Download the ARM Template for Lab </a> also 
<a href="../../Allfiles/Labs/06/az104-06-vms-parameters.json" download>⬇️ Download the Parameters ARM Template for this Lab </a></p>
</li>
<li>
<p>Sign in to the <strong>Azure portal</strong> - <code>https://portal.azure.com</code>.</p>
</li>
<li>
<p>Search for and select <code>Deploy a custom template</code>.</p>
</li>
<li>
<p>On the custom deployment page, select <strong>Build your own template in the editor</strong>.</p>
</li>
<li>
<p>On the edit template page, select <strong>Load file</strong>.</p>
</li>
<li>
<p>Locate and select the <strong>ARM Template file</strong> that you have downloaded and then select <strong>Open</strong>.</p>
</li>
<li>
<p>Select <strong>Save</strong>.</p>
</li>
<li>
<p>Select <strong>Edit parameters</strong> and load the <strong>\Parameter file</strong> that you have downloaded.</p>
</li>
<li>
<p>Select <strong>Save</strong>.</p>
</li>
<li>
<p>Use the following information to complete the fields on the custom deployment page, leaving all other fields with the default value.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td>your Azure subscription</td>
</tr>
<tr>
<td>Resource group</td>
<td><code>az104-rg6</code> (If necessary, select <strong>Create new</strong>)</td>
</tr>
<tr>
<td>Password</td>
<td>Provide a secure password</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong>: If you receive an error that the VM size is unavailable, select a SKU that is available in your subscription and has at least 2 cores.</p>
</blockquote>
</li>
<li>
<p>Select <strong>Review + Create</strong> and then select <strong>Create</strong>.</p>
<blockquote>
<p><strong>Note</strong>: Wait for the deployment to complete before moving to the next task. The deployment should take approximately 5 minutes.</p>
<p><strong>Note</strong>: Review the resources being deployed. There will be one virtual network with three subnets. Each subnet will have a virtual machine.</p>
</blockquote>
</li>
</ol>
<h2 id="task-2-configure-an-azure-load-balancer">Task 2: Configure an Azure Load Balancer<a class="headerlink" href="#task-2-configure-an-azure-load-balancer" title="Permanent link">&para;</a></h2>
<p>In this task, you implement an Azure Load Balancer in front of the two Azure virtual machines in the virtual network. Load Balancers in Azure provide layer 4 connectivity across resources, such as virtual machines. Load Balancer configuration includes a front-end IP address to accept connections, a backend pool, and rules that define how connections should traverse the load balancer.</p>
<h2 id="architecture-diagram-load-balancer">Architecture Diagram - Load Balancer<a class="headerlink" href="#architecture-diagram-load-balancer" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Note</strong>: Notice the Load Balancer is distributing across two virtual machines in the same virtual network.</p>
</blockquote>
<p><img alt="Diagram of the lab tasks." src="../../media/az104-lab06-lb-architecture.png" /></p>
<ol>
<li>
<p>In the Azure portal, search for and select <code>Load balancers</code> and, on the <strong>Load balancers</strong> blade, click <strong>+ Create</strong>.</p>
</li>
<li>
<p>Create a load balancer with the following settings (leave others with their default values) then click <strong>Next: Frontend IP configuration</strong>:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td>your Azure subscription</td>
</tr>
<tr>
<td>Resource group</td>
<td><strong>az104-rg6</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>az104-lb</code></td>
</tr>
<tr>
<td>Region</td>
<td>The <strong>same</strong> region that you deployed the VMs</td>
</tr>
<tr>
<td>SKU</td>
<td><strong>Standard</strong></td>
</tr>
<tr>
<td>Type</td>
<td><strong>Public</strong></td>
</tr>
<tr>
<td>Tier</td>
<td><strong>Regional</strong></td>
</tr>
</tbody>
</table>
<p><img alt="Screenshot of the create load balancer page." src="../../media/az104-lab06-create-lb1.png" /></p>
</li>
<li>
<p>On the <strong>Frontend IP configuration</strong> tab, click <strong>Add a frontend IP configuration</strong> and use the following settings:  </p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-fe</code></td>
</tr>
<tr>
<td>IP type</td>
<td>IP address</td>
</tr>
<tr>
<td>Gateway Load Balancer</td>
<td>None</td>
</tr>
<tr>
<td>Public IP address</td>
<td>Select <strong>Create new</strong> (use the instructions in the next step)</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>On the <strong>Add a public IP address</strong> popup, use the following settings before clicking <strong>OK</strong> and then <strong>Add</strong>. When completed click <strong>Next: Backend pools</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-lbpip</code></td>
</tr>
<tr>
<td>SKU</td>
<td>Standard</td>
</tr>
<tr>
<td>Tier</td>
<td>Regional</td>
</tr>
<tr>
<td>Assignment</td>
<td>Static</td>
</tr>
<tr>
<td>Routing Preference</td>
<td><strong>Microsoft network</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> The Standard SKU provides a static IP address. Static IP addresses are assigned with the resource is created and released when the resource is deleted.  </p>
</blockquote>
</li>
<li>
<p>On the <strong>Backend pools</strong> tab, click <strong>Add a backend pool</strong> with the following settings (leave others with their default values). Click <strong>+ Add</strong> (twice) and then click <strong>Next: Inbound rules</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-be</code></td>
</tr>
<tr>
<td>Virtual network</td>
<td><strong>az104-06-vnet1</strong></td>
</tr>
<tr>
<td>Backend Pool Configuration</td>
<td><strong>NIC</strong></td>
</tr>
<tr>
<td>Click <strong>Add</strong> to add a virtual machine</td>
<td></td>
</tr>
<tr>
<td>az104-06-vm0</td>
<td><strong>check the box</strong></td>
</tr>
<tr>
<td>az104-06-vm1</td>
<td><strong>check the box</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>As you have time, review the other tabs, then click <strong>Review + create</strong>. Ensure there are no validation errors, then click <strong>Create</strong>.</p>
</li>
<li>
<p>Wait for the load balancer to deploy then click <strong>Go to resource</strong>.</p>
</li>
</ol>
<p><strong>Add a Rule to determine how incoming traffic is distributed</strong></p>
<ol>
<li>
<p>In the <strong>Settings</strong> blade, select <strong>Load balancing rules</strong>.</p>
</li>
<li>
<p>Select <strong>+ Add</strong>. Add a load balancing rule with the following settings (leave others with their default values).  As you configure the rule use the informational icons to learn about each setting. When finished click <strong>Save</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-lbrule</code></td>
</tr>
<tr>
<td>IP Version</td>
<td><strong>IPv4</strong></td>
</tr>
<tr>
<td>Frontend IP Address</td>
<td><strong>az104-fe</strong></td>
</tr>
<tr>
<td>Backend pool</td>
<td><strong>az104-be</strong></td>
</tr>
<tr>
<td>Protocol</td>
<td><strong>TCP</strong></td>
</tr>
<tr>
<td>Port</td>
<td><code>80</code></td>
</tr>
<tr>
<td>Backend port</td>
<td><code>80</code></td>
</tr>
<tr>
<td>Health probe</td>
<td><strong>Create new</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>az104-hp</code></td>
</tr>
<tr>
<td>Protocol</td>
<td><strong>TCP</strong></td>
</tr>
<tr>
<td>Port</td>
<td><code>80</code></td>
</tr>
<tr>
<td>Interval</td>
<td><code>5</code></td>
</tr>
<tr>
<td>Close the create health probe window</td>
<td><strong>Save</strong></td>
</tr>
<tr>
<td>Session persistence</td>
<td><strong>None</strong></td>
</tr>
<tr>
<td>Idle timeout (minutes)</td>
<td><code>4</code></td>
</tr>
<tr>
<td>TCP reset</td>
<td><strong>Disabled</strong></td>
</tr>
<tr>
<td>Floating IP</td>
<td><strong>Disabled</strong></td>
</tr>
<tr>
<td>Outbound source network address translation (SNAT)</td>
<td><strong>Recommended</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>Frontend IP configuration</strong> from the Load Balancer page. Copy the public IP address.</p>
</li>
<li>
<p>Open another browser tab and navigate to the IP address. Verify that the browser window displays the message <strong>Hello World from az104-06-vm0</strong> or <strong>Hello World from az104-06-vm1</strong>.</p>
</li>
<li>
<p>Refresh the window to verify the message changes to the other virtual machine. This demonstrates the load balancer rotating through the virtual machines.</p>
<blockquote>
<p><strong>Note</strong>: You may need to refresh more than once or open a new browser window in InPrivate mode.</p>
</blockquote>
</li>
</ol>
<h2 id="task-3-configure-an-azure-application-gateway">Task 3: Configure an Azure Application Gateway<a class="headerlink" href="#task-3-configure-an-azure-application-gateway" title="Permanent link">&para;</a></h2>
<p>In this task, you implement an Azure Application Gateway in front of two Azure virtual machines. An Application Gateway provides layer 7 load balancing, Web Application Firewall (WAF), SSL termination, and end-to-end encryption to the resources defined in the backend pool. The Application Gateway routes images to one virtual machine and videos to the other virtual machine.</p>
<h2 id="architecture-diagram-application-gateway">Architecture Diagram - Application Gateway<a class="headerlink" href="#architecture-diagram-application-gateway" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Note</strong>: This Application Gateway is working in the same virtual network as the Load Balancer. This may not be typical in a production environment.</p>
</blockquote>
<p><img alt="Diagram of the lab tasks." src="../../media/az104-lab06-gw-architecture.png" /></p>
<ol>
<li>
<p>In the Azure portal, search and select <code>Virtual networks</code>.</p>
</li>
<li>
<p>On the <strong>Virtual networks</strong> blade, in the list of virtual networks, click <strong>az104-06-vnet1</strong>.</p>
</li>
<li>
<p>On the <strong>az104-06-vnet1</strong> virtual network blade, in the <strong>Settings</strong> section, click <strong>Subnets</strong>, and then click <strong>+ Subnet</strong>.</p>
</li>
<li>
<p>Add a subnet with the following settings (leave others with their default values).</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>subnet-appgw</code></td>
</tr>
<tr>
<td>Starting address</td>
<td><code>10.60.3.224</code></td>
</tr>
<tr>
<td>Size</td>
<td><code>/27</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save</strong></p>
<blockquote>
<p><strong>Note</strong>: This subnet will be used by the Azure Application Gateway. The Application Gateway requires a dedicated subnet of /27 or larger size.</p>
</blockquote>
</li>
<li>
<p>In the Azure portal, search and select <code>Application gateways</code> and, on the <strong>Application Gateways</strong> blade, click <strong>+ Create</strong>.</p>
</li>
<li>
<p>On the <strong>Basics</strong> tab, specify the following settings (leave others with their default values):</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td>your Azure subscription</td>
</tr>
<tr>
<td>Resource group</td>
<td><code>az104-rg6</code></td>
</tr>
<tr>
<td>Application gateway name</td>
<td><code>az104-appgw</code></td>
</tr>
<tr>
<td>Region</td>
<td>The <strong>same</strong> Azure region that you used in Task 1</td>
</tr>
<tr>
<td>Tier</td>
<td><strong>Standard V2</strong></td>
</tr>
<tr>
<td>Enable autoscaling</td>
<td><strong>No</strong></td>
</tr>
<tr>
<td>Minimum instance count</td>
<td><code>2</code></td>
</tr>
<tr>
<td>Availability zone</td>
<td><strong>1</strong> (default)</td>
</tr>
<tr>
<td>HTTP2</td>
<td><strong>Disabled</strong></td>
</tr>
<tr>
<td>Virtual network</td>
<td><strong>az104-06-vnet1</strong></td>
</tr>
<tr>
<td>Subnet</td>
<td><strong>subnet-appgw (10.60.3.224/27)</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Next: Frontends &gt;</strong> and specify the following settings (leave others with their default values). When complete, click <strong>OK</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frontend IP address type</td>
<td><strong>Public</strong></td>
</tr>
<tr>
<td>Public IP address</td>
<td><strong>Add new</strong></td>
</tr>
<tr>
<td>Name</td>
<td><code>az104-gwpip</code></td>
</tr>
<tr>
<td>Availability zone</td>
<td><strong>1</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> The Application Gateway can have both a public and private IP address.</p>
</blockquote>
</li>
<li>
<p>Click <strong>Next : Backends &gt;</strong> and then <strong>Add a backend pool</strong>. Specify the following settings (leave others with their default values). When completed click <strong>Add</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-appgwbe</code></td>
</tr>
<tr>
<td>Add backend pool without targets</td>
<td><strong>No</strong></td>
</tr>
<tr>
<td>Virtual machine</td>
<td><strong>az104-06-nic1 (10.60.1.4)</strong></td>
</tr>
<tr>
<td>Virtual machine</td>
<td><strong>az104-06-nic2 (10.60.2.4)</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Add a backend pool</strong>. This is the backend pool for <strong>images</strong>. Specify the following settings (leave others with their default values). When completed click <strong>Add</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-imagebe</code></td>
</tr>
<tr>
<td>Add backend pool without targets</td>
<td><strong>No</strong></td>
</tr>
<tr>
<td>Virtual machine</td>
<td><strong>az104-06-nic1 (10.60.1.4)</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Add a backend pool</strong>. This is the backend pool for <strong>video</strong>. Specify the following settings (leave others with their default values). When completed click <strong>Add</strong>.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td><code>az104-videobe</code></td>
</tr>
<tr>
<td>Add backend pool without targets</td>
<td><strong>No</strong></td>
</tr>
<tr>
<td>Virtual machine</td>
<td><strong>az104-06-nic2 (10.60.2.4)</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Select <strong>Next : Configuration &gt;</strong> and then <strong>Add a routing rule</strong>. Complete the information.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule name</td>
<td><code>az104-gwrule</code></td>
</tr>
<tr>
<td>Priority</td>
<td><code>10</code></td>
</tr>
<tr>
<td>Listener name</td>
<td><code>az104-listener</code></td>
</tr>
<tr>
<td>Frontend IP</td>
<td><strong>Public IPv4</strong></td>
</tr>
<tr>
<td>Protocol</td>
<td><strong>HTTP</strong></td>
</tr>
<tr>
<td>Port</td>
<td><code>80</code></td>
</tr>
<tr>
<td>Listener type</td>
<td><strong>Basic</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Move to the <strong>Backend targets</strong> tab. Select <strong>Add</strong> after completing the basic information.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Backend target</td>
<td><code>az104-appgwbe</code></td>
</tr>
<tr>
<td>Backend settings</td>
<td><code>az104-http</code> (create new)</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note:</strong> Take a minute to read the information about <strong>Cookie-based affinity</strong> and <strong>Connection draining</strong>.</p>
</blockquote>
<ol>
<li>
<p>In the <strong>Path-based routing</strong> section, select <strong>Add multiple targets to create a path-based rule</strong>. You will create two rules. Click <strong>Add</strong> after the first rule and then <strong>Add</strong> after the second rule. </p>
<p><strong>Rule - routing to the images backend</strong></p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Path</td>
<td><code>/image/*</code></td>
</tr>
<tr>
<td>Target name</td>
<td><code>images</code></td>
</tr>
<tr>
<td>Backend settings</td>
<td><strong>az104-http</strong></td>
</tr>
<tr>
<td>Backend target</td>
<td><code>az104-imagebe</code></td>
</tr>
</tbody>
</table>
<p><strong>Rule - routing to the videos backend</strong></p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Path</td>
<td><code>/video/*</code></td>
</tr>
<tr>
<td>Target name</td>
<td><code>videos</code></td>
</tr>
<tr>
<td>Backend settings</td>
<td><strong>az104-http</strong></td>
</tr>
<tr>
<td>Backend target</td>
<td><code>az104-videobe</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Be sure to <strong>Save</strong> and check your changes, then select <strong>Next : Tags &gt;</strong>. No changes are needed.</p>
</li>
<li>
<p>Select <strong>Next : Review + create &gt;</strong> and then click <strong>Create</strong>.</p>
<blockquote>
<p><strong>Note</strong>: Wait for the Application Gateway instance to be created. This will take approximately 5-10 minutes. While you wait consider reviewing some of the self-paced training links at the end of this page.</p>
</blockquote>
</li>
<li>
<p>After the application gateway deploys, search for and select <strong>az104-appgw</strong>.</p>
</li>
<li>
<p>In the <strong>Application Gateway</strong> resource, in the <strong>Monitoring</strong> section, select <strong>Backend health</strong>.</p>
</li>
<li>
<p>Ensure both servers in the backend pool display <strong>Healthy</strong>.</p>
</li>
<li>
<p>On the <strong>Overview</strong> blade, copy the value of the <strong>Frontend public IP address</strong>.</p>
</li>
<li>
<p>Start another browser window and test this URL - <code>http://&lt;frontend ip address&gt;/image/</code>.</p>
</li>
<li>
<p>Verify you are directed to the image server (vm1).</p>
</li>
<li>
<p>Start another browser window and test this URL - <code>http://&lt;frontend ip address&gt;/video/</code>.</p>
</li>
<li>
<p>Verify you are directed to the video server (vm2).</p>
</li>
</ol>
<blockquote>
<p><strong>Note</strong>: You may need to refresh more than once or open a new browser window in InPrivate mode.</p>
</blockquote>
<h2 id="cleanup-your-resources">Cleanup your Resources<a class="headerlink" href="#cleanup-your-resources" title="Permanent link">&para;</a></h2>
<p>If you are working with <strong>your own subscription</strong> take a minute to delete the lab resources. This will ensure resources are freed up and cost is minimized. The easiest way to delete the lab resources is to delete the lab resource group. </p>
<ul>
<li>In the Azure portal, select the resource group, select <strong>Delete the resource group</strong>, <strong>Enter resource group name</strong>, and then click <strong>Delete</strong>.</li>
<li>Using Azure PowerShell, <code>Remove-AzResourceGroup -Name resourceGroupName</code>.</li>
<li>Using the CLI, <code>az group delete --name resourceGroupName</code>.</li>
</ul>
<h2 id="key-takeaways">Key Takeaways<a class="headerlink" href="#key-takeaways" title="Permanent link">&para;</a></h2>
<p>Congratulations on completing the lab. Here are the key points for this lab.</p>
<ul>
<li>Azure Load Balancer is an excellent choice for distributing network traffic across multiple virtual machines at the transport layer (OSI layer 4 - TCP and UDP).</li>
<li>Public Load Balancers are used to load balance internet traffic to your VMs. An internal (or private) load balancer is used where private IPs are needed at the frontend only.</li>
<li>The Basic load balancer is for small-scale applications that don't need high availability or redundancy. The Standard load balancer is for high performance and ultra-low latency.</li>
<li>Azure Application Gateway is a web traffic (OSI layer 7) load balancer that enables you to manage traffic to your web applications.</li>
<li>The Application Gateway Standard tier offers all the L7 functionality, including load balancing, The WAF tier adds a firewall to check for malicious traffic.</li>
<li>An Application Gateway can make routing decisions based on additional attributes of an HTTP request, for example URI path or host headers.</li>
</ul>
<hr />
<div style="text-align: center; padding-top: 30px;">
  <img src="/media/logo.png" alt="EduWe Logo" style="max-width: 150px; height: auto;"/>

  <center><strong>Ceekh Edunix Pvt Ltd</strong></center><br>
    Address: H-34, Ground Floor, Sector 63, Noida, Uttar Pradesh<br>
    Email: <a href="mailto:info@ceekh.com" style="color: #007bff;">info@ceekh.com</a>
  </p>
  <p style="font-size: 14px; color: #555;"><center>© 2025 EduWe. All rights reserved.| Developed by Deepak Kumar Tyagi </center></p>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.twitter.com" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.facebook.com" target="_blank" rel="noopener" title="Facebook" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/@eduwe8400" target="_blank" rel="noopener" title="YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:info@ceekh.com" target="_blank" rel="noopener" title="Email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.expand", "header.autohide", "content.code.copy", "content.action.edit", "content.tooltips"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>